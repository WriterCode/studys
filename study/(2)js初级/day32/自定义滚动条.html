<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style type="text/css">
		*{margin: 0;padding: 0;}
		#wrap{
			width: 300px;
			height: 400px;
			border:1px solid #ccc;
			position: relative;
			overflow: hidden;
		}
		#middle{
			width: 280px;
			background: red;
			padding:10px 0px 20px 0px;
			position: absolute;
			top:0px;
			left:0px;
		}
		#sliderWrap{
			width: 20px;
			background: #ccc;
			height: 400px;
			position: absolute;
			right:0px;
			top:0px;
		}
		#slider{
			width: 20px;
			height: 40px;
			border-radius: 10px;
			background: yellow;
			position: absolute;
			top:0px;
		}
	</style>
</head>
<body>
	<div id="wrap">
		<div id="middle">文字，是一米阳光，温暖着我的心。阳光明媚，我在阳光里享受着它的融融暖意。文字，发着光，发着热，让我的灵魂不再四处漂游。文字，好暖，让我结冰的心湖慢慢融化。阳光，让早已心如死灰的心感受到从未有过的温暖。只要抓住那一米阳光，就等于抓住了一颗救命稻草。文字，是一颗星星，让我看到希望，看到未来。星星散发着璀璨的光辉，指引我要走的方向。星星，一闪一闪放光芒。我在星辉里，沉醉不知归路，兴尽晚回舟。那个方向，让我如痴如醉。我想，那就是文字的魅力吧。它是在黑夜里最璀璨的那一颗，照亮整个夜空。文字，是一弯月亮，让人思念，让人感叹。抬头望明月，低头思故乡。我对月感叹，将自己的思念透过月光传递到故乡，将我浓浓的相思情透过文字尽情地书写。月亮里，抱着玉兔的嫦娥，虽然想念着吴刚，但，如果，她有一张纸和一支笔，便可用笔和纸抒写对他的思念。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。文字，是一座座山川，父爱如山。绿油油的山川，一座连着一座，连绵不绝。雄伟的山川，好像父亲的臂膀，坚实宽厚。文字，让我感觉到父爱的威严中其实深藏着深深的父爱。父亲，总是不善言说，他总是用巍峨的脊梁顶起整个家的重量。他的背影，宽厚而仁慈，因为文字，我渐渐读懂了父爱。</div>

		<div id="sliderWrap">
			<div id="slider"></div>
		</div>
	</div>

	<script type="text/javascript">
		var wrap = document.querySelector('#wrap');
		var middle = document.querySelector('#middle');
		var sliderWrap = document.querySelector('#sliderWrap');
		var slider = document.querySelector('#slider');

		// 求比例
		var scale = middle.offsetHeight / wrap.offsetHeight;

		// 计算slider高度
		var sliderH = sliderWrap.offsetHeight / scale;

		// 吧sliderH的值给slider并判断slider的最小值和最大值
		if(sliderH <= 40){
			sliderH = 40;
		}else if(sliderH >= sliderWrap.offsetHeight){
			sliderWrap.style.display = 'none';
		}
		slider.style.height = sliderH + 'px';

		var sliderTop = 0;
		var maxTop = sliderWrap.offsetHeight - sliderH;

		// 按键操控
		document.addEventListener('keydown',function(e){
			var ev = e || window.event;
			switch(ev.keyCode){
				case 38:
					sliderTop -= 10;
					moveFn();
					break;
				case 40:
					sliderTop += 10;
					moveFn();
					break;
			}
		});


		// 鼠标滚动轮操控
		if(navigator.userAgent.indexOf('Firefox') != -1){
			console.log('火狐');
			wrap.addEventListener('DOMMouseScroll',scorllFn);
		}else{
			console.log('非火狐');
			wrap.addEventListener('mousewheel',scorllFn);
		}

		

		// 鼠标拖拽操控
		var y1 = 0;
		slider.addEventListener('mousedown',function(e){
			var ev = window.event || e;
			// ev.stopPropahation();
			// ev.preventDefault();
			y1 = ev.clientY - slider.offsetTop;		
			document.addEventListener('mousemove',fooFn);
		});
		document.addEventListener('mouseup',function(){
			document.removeEventListener('mousemove',fooFn);
		});

		// 取消默认事件
		document.addEventListener('mousedown',function(e){
			var ev = e || window.event;
			// return false;
			ev.preventDefault();
		});


		// 鼠标点击操控
		sliderWrap.addEventListener('click',function(e){
			var ev = e || window.event;
			var clickY = ev.clientY - wrap.offsetTop;
			if(clickY < slider.offsetTop){
				sliderTop -= 30;
				moveFn();
			}else{
				sliderTop += 30;
				moveFn();
			} 
		});



		function fooFn(e){
			var ev = window.event || e;
			sliderTop = ev.clientY - y1;
			if(sliderTop < 0){
				sliderTop = 0;
			}else if(sliderTop > wrap.offsetHeight - slider.offsetHeight){
				sliderTop = wrap.offsetHeight - slider.offsetHeight;
			}
			slider.style.top = sliderTop + 'px';
			middle.style.top = -sliderTop * scale + 'px';
		}



		function moveFn(){
			if(sliderTop <= 0){
				sliderTop = 0;
			}else if(sliderTop >= maxTop){
				sliderTop = maxTop;
			}
			// var sliderScale = sliderTop / maxTop;
			slider.style.top = sliderTop + 'px';
			middle.style.top = -sliderTop*scale + 'px';
			// middle.style.top = -(middle.offsetHeight - wrap.offsetHeight) * sliderScale + 'px';
		}


		
		function scorllFn(e){
			var ev = e || window.event;
			if(ev.detail){
				console.log('火狐浏览器');
				if(ev.detail < 0){
					console.log('向上');
					sliderTop -= 10;
					moveFn();
				}else{
					console.log('向下');
					sliderTop += 10;
					moveFn();
				}
			}else if(ev.wheelDelta){
				console.log('非火狐浏览器');
				if(ev.wheelDelta > 0){
					console.log('向上');
					sliderTop -= 10;
					moveFn();
				}else{
					console.log('向下');
					sliderTop += 10;
					moveFn();
				}
			}
			
		}

	</script>
</body>
</html>