<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
		}
		ul{
			width: 25%;
			list-style: none;
			float:left;
		}
		ul li{
			margin-top: 2%;
			margin-left: 2%;
		}
		ul li img{
			width: 100%;
			/*解决图片空隙*/
			display: block;
		}
		.clearFix::after{
			content: '';
			display: block;
			clear: both;
		}
		#mask{
			position: fixed;
			top:50%;
			left: 50%;
			transform: translate(-50%,-50%);
			border:20px solid #fff;
			display: none;
		}
		#mask img{
			display: block;
		}
	</style>
</head>
<body>
	<div id="wrap" class="clearFix">
		<ul></ul>
		<ul></ul>
		<ul></ul>
		<ul></ul>
		<div id="mask"><img src=""></div>
	</div>
	<script type="text/javascript">
		var uls = document.querySelectorAll('#wrap ul');
		var mask = document.querySelector('#mask');

		mask.addEventListener('click',function(){
			this.style.display = 'none';
		});
		document.addEventListener('click',function(){
			mask.style.display = 'none';
		},true);
		for(var i = 1;i < 39;i++){
			// 创建li
			var li = document.createElement('li');
			// 给li添加图片
			li.innerHTML = '<img src="imgs/' + i +'.jpg"/>'
			
			// 图片预加载
			li.children[0].onload = function(){
				// 判断ul高度,用来存放ul的高度
				var ulHeightArr = [];
				for(var j = 0;j < uls.length;j++){
					ulHeightArr.push(uls[j].offsetHeight);
				}
				var minHeight = ulHeightArr[0];
				var minIndex = 0;
				for(var k = 0;k < ulHeightArr.length;k++){
					if(minHeight > ulHeightArr[k]){
						minHeight = ulHeightArr[k];
						minIndex = k;
					}
				}
				uls[minIndex].appendChild(this.parentNode);
			}
			li.addEventListener('click',function(){
				// var ev = window.event || e;
				// ev.stopPropagation();
				var imgSrc = this.children[0].getAttribute('src');
				mask.style.display = 'block';
				mask.children[0].src = imgSrc;
			});
		}



	</script>
</body>
</html>